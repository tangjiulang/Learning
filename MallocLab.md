# Malloc Lab

- 空间利用率：mm_malloc 或 mm_realloc 函数分配且未被 mm_free 释放的内存与堆的大小的比值。应该找到好的策略使碎片最小化，以使该比率尽可能接近 1
- 吞吐率：每单位时间完成的最大请求数，即要使时间复杂度尽可能小

将空闲块分为 20 个链表，每个空闲块最小单位是 16 字节

分为的链表分别表示大小为 $[16 - 32]\ [33 - 64]\ [65 - 128].... [2^{22}- \infty]$ 的空闲块

每一个块都有一个头部和脚部，在有效载荷中又分别存放着指向前一个块和后一个块的指针。

## malloc

根据需要分配的大小，从对应的链表中找到可以放置的空闲块，然后将其从链表中删除，进行分配，如果有剩余，放入对应大小的链表中

如果没有找到，就去更大一层的链表中找

如果都没有，使用 sbrk 进行内存分配

## free

找到前后可以合并的空闲块，将其从对应的链表中删除，然后和本空闲块进行合并，然后插入到对应大小的链表中